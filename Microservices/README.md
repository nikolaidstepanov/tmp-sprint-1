# Microservices

## Обоснование разбивки монолита на микросервисы

Разбиение данного монолита на микросервисы дает нам ряд преимуществ:
- Легкое масштабирование критических сервисов: Каждый микросервис можно масштабировать независимо, что позволяет выделить больше ресурсов на наиболее востребованные или нагруженные компоненты, не перегружая всю систему.
- Облегчение разработки и деплоя: Разделение на микросервисы позволяет разрабатывать и развертывать каждый компонент независимо, что сокращает время разработки и деплоя и снижает вероятность возникновения конфликтов между командами разработчиков.
- Гибкость при добавлении новых функций: Поскольку микросервисы изолированы, добавление новых функций становится проще и безопаснее, так как изменения в одном сервисе не повлияют на другие компоненты системы.
- Улучшенная устойчивость системы: В случае сбоя одного микросервиса, остальные продолжают работать, что снижает риск полной остановки системы и повышает её отказоустойчивость.
- Простота в управлении зависимостями и обновлениях: Каждый микросервис может использовать подходящие для него технологии и версии зависимостей. Это облегчает процесс обновления и поддержку актуальных библиотек, не мешая другим компонентам системы.
- Улучшенная безопасность: Разделение системы позволяет ограничить доступ к каждому микросервису по необходимости, что делает систему более безопасной. Например, платёжные операции могут быть изолированы в отдельном сервисе с более строгими мерами защиты.

## Микросервисы

**1. Микросервис Регистрация и Аутентификация**

Задачи: Обеспечивает регистрацию новых пользователей, аутентификацию и управление доступом на платформу.

Данные: Данные пользователей (логин, пароль, роли, уровни доступа), информация о сессиях, журналы аутентификации.

Функции:
- Регистрация новых пользователей.
- Проверка логина и пароля.
- Управление ролями и доступом.
Мотивация выноса: Выделение микросервиса аутентификации позволяет обеспечить безопасность данных и независимость управления доступом. Это критическая часть платформы, которую можно масштабировать и модернизировать отдельно.

**2. Микросервис Поддержка пользователей**

Задачи: Промежуточный легий слой между пользователем и технической поддежркой, который нужен только для заведения обращений и получения статусов. Можно рассматриавать, как BFF.

Данные: Не хранит данные, но запрашивает их в сервисе Техподдержка

Функции:
- Создание заявок на теходдержку и аппеляций.
- Проверка статусов заявок на теходдержку и аппеляций.
Мотивация выноса: Вынесение в виде BFF позволяет снизить нагрузку на тяжелый модуль техподдержки

**3. Микросервис Техподдержка**

Задачи: Управляет запросами на поддержку, обеспечивает обработку тикетов и ответов на обращения пользователей.

Данные: Тикеты поддержки, история обращений, статусы тикетов.

Функции:
- Создание и управление тикетами.
- Обработка обращений пользователей.
- Управление статусами тикетов.
Мотивация выноса: Выделение техподдержки позволяет эффективно обрабатывать обращения, улучшая пользовательский опыт и облегчая работу службы поддержки.

**4. Микросервис Пользователи**


Задачи: Управляет профилями пользователей, включая их персональные данные и настройки.

Данные: Профили пользователей, персональные данные, настройки.

Функции:
- Просмотр и редактирование профиля.
- Управление настройками.
Мотивация выноса: Позволяет гибко обновлять и масштабировать функции работы с профилями без влияния на другие части системы.

**5. Микросервис Заказы**


Задачи: Управляет заказами на платформе, включает функции создания, редактирования и отслеживания заказов.

Данные: Информация о заказах (ID заказа, пользователь, статус, содержимое).

Функции:
- Создание и редактирование заказов.
- Управление статусами заказов.
Мотивация выноса: Отдельный микросервис для заказов позволяет изолировать логику работы с заказами, облегчая поддержание и масштабирование этой функциональности.

**6. Микросервис Услуги**

Задачи: Управляет размещением и управлением услуг, доступных на платформе.

Данные: Данные о доступных услугах (описание, цена, категория).

Функции:
- Добавление и редактирование услуг.
- Управление категориями услуг.
- Поиск и покупка услуг.
Мотивация выноса: Изоляция логики работы с услугами позволяет лучше управлять этим модулем и обновлять его независимо.

**7. Микросервис Товары**

Задачи: Обеспечивает управление товарами, включая их добавление, редактирование и удаление.

Данные: Данные о товарах (название, описание, цена, категория).

Функции:
- Добавление и редактирование товаров.
- Управление категориями товаров.
- Поиск и покупка товаров.
Мотивация выноса: Независимость модуля управления товарами облегчает поддержку и позволяет обновлять или добавлять товары без влияния на другие сервисы.

**8. Микросервис Аукцион**

Задачи: Управляет аукционами, позволяет пользователям участвовать в торгах на платформе.

Данные: Информация о лотах, ставки пользователей, история аукционов.

Функции:
- Создание и управление лотами.
- Прием и обработка ставок.
Мотивация выноса: Выделение аукционного модуля позволяет работать с высоко динамичным контентом, где быстро меняются ставки и лоты, и управлять аукционом независимо от других процессов.

**9. Микросервис Уведомлений**

Задачи: Отвечает за отправку уведомлений пользователям о различных событиях на платформе.

Данные: Данные уведомлений, история отправок, статусы отправок.

Функции:
- Создание и отправка уведомлений.
- Управление каналами уведомлений.
Мотивация выноса: Отдельный сервис уведомлений облегчает настройку каналов коммуникации и управление рассылками, не влияя на основную логику приложения. Важно, что на схеме для упрощения не показана связь между функциями "Нотификации" в различных микросервисах и общим сервисом уведомлений. Схема взаимодействия с ними работает по следующему принципу:
- Регистрируем уведомление
- Получаем уведомление
- Формируем уведомление и отправляем его с нужны ID
- Можем запросить стаутс уведомления по ID, если это необходимо

**10. Платёжный сервис**

Задачи: Обеспечивает интеграцию с внешними платёжными провайдерами, авторизацию и проверку платежей, управление статусами транзакций.

Данные: Данные о платежах (ID транзакции, статус, сумма).

Функции:
- Инициация и обработка платежей.
- Подтверждение статусов транзакций.
Мотивация выноса: Изоляция платёжной системы необходима для обеспечения безопасности, упрощения интеграции с внешними провайдерами и минимизации влияния на другие части системы.

**11. Административный сервис**

Задачи: Обеспечивает административные функции для управления платформой, включая управление пользователями, заказами, товарами и ролями.

Данные: Данные администраторов, логи действий, настройки платформы, редактирование данных пользователей (товары и услуги), подверждение аукционов.

Функции:
- Управление пользователями и ролями.
- Отображение статистики и отчётов.
- Управление товарами и услугами пользователей при необходимости (например, ручная модерация).
- Валидация аукционов.
Мотивация выноса: Отдельный сервис администрирования улучшает безопасность и позволяет администрировать систему независимо от пользовательской части.

**12. Аналитический сервис**

Задачи: Собирает и анализирует данные, предоставляет отчёты и аналитику для платформы.

Данные: Исторические данные заказов, данные о пользователях и товарах.

Функции:
- Формирование отчётов и дашбордов.
- Анализ данных и трендов.
Мотивация выноса: Выделение аналитики позволяет настраивать отчёты и собирать данные независимо, что важно для масштабирования и улучшения отчётности.

**13. ETL-процесс**

Задачи: Управляет процессами извлечения, трансформации и загрузки данных для аналитики.

Данные: Необработанные данные, аналитические данные.

Функции:
- Извлечение данных из разных источников.
- Трансформация данных для аналитики.
- Загрузка данных в аналитическое хранилище.
Мотивация выноса: ETL-сервис как отдельный компонент позволяет автоматизировать обработку данных и интегрировать новые источники данных независимо от других частей системы.

## Решение
[Ссылка на решение задания по микрофронтеднам в draw.io](https://drive.google.com/file/d/1uJ04p9L-DKkUl1I4Ybxp4ohn34V9spnC/view?usp=sharing) - (см. страинцу Solution).